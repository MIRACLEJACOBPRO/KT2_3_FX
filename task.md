# 风险路径识别系统实现任务书 📝

## 项目概述 🔍

本项目旨在开发一个风险路径识别系统，能够从系统日志中提取攻击行为的关键传播路径，并以路径形式输出。系统需要分析原始日志数据，构建行为链路，识别攻击路径，并生成风险报告。

## 任务状态图标说明 🎨

| 图标 | 状态 |
| --- | --- |
| 🔴 | 未开始 |
| 🟡 | 进行中 |
| 🟢 | 已完成 |
| ⚠️ | 需要注意 |
| 🐞 | 存在问题 |

## 技术实现任务清单 📋

### 1. 数据处理模块 - fx_data.py 🟢

**目标**：处理原始日志数据，识别攻击行为，并提取关键信息。

**具体任务**：

1. 读取测试数据集（test_data/test.json）
2. 解析JSON格式的日志数据
3. 按时间顺序排序日志事件
4. 识别可能的攻击行为（基于行为模式和特征）
5. 输出识别到的攻击行为数量
6. 将处理后的数据保存为中间格式，供后续分析使用

**输入**：`all_data/test_data/test.json`
**输出**：攻击行为识别结果和中间数据文件
**预期终端输出**："已识别到攻击行为：XX条"

### 2. 行为链路构建模块 🟢

**目标**：基于处理后的数据构建完整的行为链路。

**具体任务**：

1. 读取数据处理模块的输出
2. 根据事件之间的关联性构建行为链路
3. 识别事件之间的因果关系
4. 构建树形结构表示行为链路
5. 区分普通行为链路和攻击行为链路
6. 保存构建的行为链路，格式参考Chain目录下的示例文件，创建一个新的文件保存这个输出结果

**输入**：数据处理模块的输出
**输出**：行为链路文件（普通链路和攻击链路）

### 3. 风险路径识别模块 - FX.py 🟢

**目标**：分析行为链路，识别关键风险路径，并生成风险报告。

**具体任务**：

1. 读取构建的行为链路
2. 分析攻击链路中的关键节点和路径
3. 计算风险评分（基于攻击路径的复杂性、影响范围等因素）
4. 生成详细的风险报告
5. 输出关键攻击路径和风险评分，创建新的文件保存输出

**输入**：行为链路文件
**输出**：风险路径和风险报告
**预期终端输出**：
- "对链路进行风险路径识别操作..."
- "攻击事件XX-XX 关键路径：XX->XX->....；风险报告：Score：XX，XXX"

### 4. 数据结构设计 🔴

**目标**：设计合适的数据结构来表示和处理日志事件、行为链路和风险路径。

**具体任务**：

1. 设计日志事件类（包含时间戳、类型、主体、对象、属性等字段）
2. 设计行为链路类（表示事件之间的关联关系）
3. 设计风险路径类（表示攻击路径和风险评分）
4. 实现数据结构之间的转换和处理方法

### 5. 攻击行为识别算法 🔴

**目标**：开发算法来识别日志中的攻击行为模式。

**具体任务**：

1. 研究攻击行为的特征和模式
2. 实现基于规则的攻击行为识别算法
3. 考虑时序关系和事件关联性
4. 优化算法以减少误报和漏报
5. 测试算法在不同攻击场景下的表现

### 6. 风险评分模型 🔴

**目标**：开发模型来评估攻击路径的风险级别。

**具体任务**：

1. 定义风险评分的计算方法
2. 考虑攻击路径的复杂性、影响范围、攻击成功率等因素
3. 实现风险评分的计算逻辑
4. 测试评分模型在不同攻击场景下的表现
5. 优化模型以提高评分的准确性和可解释性

### 7. 报告生成模块 🔴

**目标**：生成详细的风险报告，包括攻击路径、风险评分和建议措施。

**具体任务**：

1. 设计风险报告的格式和内容
2. 实现报告生成逻辑
3. 包含攻击路径的可视化表示
4. 提供风险缓解建议
5. 支持不同格式的报告输出（如文本、HTML等）

### 8. 测试与评估 🔴

**目标**：测试系统的功能和性能，评估识别结果的准确性。

**具体任务**：

1. 设计测试用例和测试数据
2. 进行功能测试（验证各模块的功能是否正常）
3. 进行性能测试（评估系统处理大量日志数据的能力）
4. 评估攻击行为识别的准确率和召回率
5. 评估风险评分的合理性和一致性

## 项目交付物 📦

1. 源代码（包括所有模块的实现）
2. 测试数据集
3. 使用说明文档
4. 测试报告
5. 示例风险报告

## 技术栈 🛠️

- 编程语言：Python 3.8+
- 数据处理：JSON、Pandas
- 算法：基于规则的模式识别、图算法
- 测试框架：pytest

## 项目时间线 📅

- 第1周：需求分析和设计
- 第2周：数据处理模块和行为链路构建模块实现
- 第3周：风险路径识别模块和风险评分模型实现
- 第4周：报告生成模块实现和系统集成
- 第5周：测试、调优和文档编写

## 注意事项 ⚠️

1. 代码需要有良好的注释和文档
2. 遵循Python编码规范（PEP 8）
3. 考虑系统的可扩展性和可维护性
4. 注重算法的效率和准确性
5. 定期备份代码和文档